(this["webpackJsonppigsty-config"]=this["webpackJsonppigsty-config"]||[]).push([[6],{154:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},205:function(e,t,a){},210:function(e,t,a){},231:function(e,t,a){},235:function(e,t,a){var n={"./apl/apl.js":[262,30],"./asciiarmor/asciiarmor.js":[263,31],"./asn.1/asn.1.js":[264,32],"./asterisk/asterisk.js":[265,33],"./brainfuck/brainfuck.js":[266,34],"./clike/clike.js":[251,2],"./clojure/clojure.js":[267,35],"./cmake/cmake.js":[268,36],"./cobol/cobol.js":[269,37],"./coffeescript/coffeescript.js":[252,38],"./commonlisp/commonlisp.js":[270,39],"./crystal/crystal.js":[271,40],"./css/css.js":[248,1],"./cypher/cypher.js":[272,41],"./d/d.js":[273,42],"./dart/dart.js":[274,2,43],"./diff/diff.js":[275,44],"./django/django.js":[276,0,1,11],"./dockerfile/dockerfile.js":[277,21],"./dtd/dtd.js":[278,45],"./dylan/dylan.js":[279,46],"./ebnf/ebnf.js":[280,47],"./ecl/ecl.js":[281,48],"./eiffel/eiffel.js":[282,49],"./elm/elm.js":[283,50],"./erlang/erlang.js":[284,51],"./factor/factor.js":[285,22],"./fcl/fcl.js":[286,52],"./forth/forth.js":[287,53],"./fortran/fortran.js":[288,54],"./gas/gas.js":[289,55],"./gfm/gfm.js":[290,4,20],"./gherkin/gherkin.js":[291,56],"./go/go.js":[292,57],"./groovy/groovy.js":[293,58],"./haml/haml.js":[294,0,1,14],"./handlebars/handlebars.js":[253,16],"./haskell-literate/haskell-literate.js":[295,26],"./haskell/haskell.js":[254,59],"./haxe/haxe.js":[296,60],"./htmlembedded/htmlembedded.js":[297,0,1,10],"./htmlmixed/htmlmixed.js":[247,0,1,27],"./http/http.js":[298,61],"./idl/idl.js":[299,62],"./javascript/javascript.js":[249,0],"./jinja2/jinja2.js":[300,63],"./jsx/jsx.js":[301,0,28],"./julia/julia.js":[302,64],"./livescript/livescript.js":[303,65],"./lua/lua.js":[304,66],"./markdown/markdown.js":[259,4],"./mathematica/mathematica.js":[305,67],"./mbox/mbox.js":[306,68],"./meta.js":[161],"./mirc/mirc.js":[307,69],"./mllike/mllike.js":[308,70],"./modelica/modelica.js":[309,71],"./mscgen/mscgen.js":[310,72],"./mumps/mumps.js":[311,73],"./nginx/nginx.js":[312,74],"./nsis/nsis.js":[313,23],"./ntriples/ntriples.js":[314,75],"./octave/octave.js":[315,76],"./oz/oz.js":[316,77],"./pascal/pascal.js":[317,78],"./pegjs/pegjs.js":[318,0,79],"./perl/perl.js":[319,80],"./php/php.js":[320,0,1,2,17],"./pig/pig.js":[321,81],"./powershell/powershell.js":[322,82],"./properties/properties.js":[323,83],"./protobuf/protobuf.js":[324,84],"./pug/pug.js":[260,0,1,3],"./puppet/puppet.js":[325,85],"./python/python.js":[255,86],"./q/q.js":[326,87],"./r/r.js":[327,88],"./rpm/rpm.js":[328,89],"./rst/rst.js":[329,13],"./ruby/ruby.js":[250,90],"./rust/rust.js":[330,24],"./sas/sas.js":[331,91],"./sass/sass.js":[257,1,92],"./scheme/scheme.js":[332,93],"./shell/shell.js":[333,94],"./sieve/sieve.js":[334,95],"./slim/slim.js":[335,0,1,15],"./smalltalk/smalltalk.js":[336,96],"./smarty/smarty.js":[337,97],"./solr/solr.js":[338,98],"./soy/soy.js":[339,0,1,18],"./sparql/sparql.js":[340,99],"./spreadsheet/spreadsheet.js":[341,100],"./sql/sql.js":[342,101],"./stex/stex.js":[256,102],"./stylus/stylus.js":[261,5],"./swift/swift.js":[343,103],"./tcl/tcl.js":[344,104],"./textile/textile.js":[345,105],"./tiddlywiki/tiddlywiki.js":[346,106],"./tiki/tiki.js":[347,107],"./toml/toml.js":[348,108],"./tornado/tornado.js":[349,0,1,12],"./troff/troff.js":[350,109],"./ttcn-cfg/ttcn-cfg.js":[352,110],"./ttcn/ttcn.js":[351,111],"./turtle/turtle.js":[353,112],"./twig/twig.js":[354,19],"./vb/vb.js":[355,113],"./vbscript/vbscript.js":[356,114],"./velocity/velocity.js":[357,115],"./verilog/verilog.js":[358,116],"./vhdl/vhdl.js":[359,117],"./vue/vue.js":[360,0,1,5,3,9],"./wast/wast.js":[361,25],"./webidl/webidl.js":[362,118],"./xml/xml.js":[246,119],"./xquery/xquery.js":[363,120],"./yacas/yacas.js":[364,121],"./yaml-frontmatter/yaml-frontmatter.js":[365,29],"./yaml/yaml.js":[258,122],"./z80/z80.js":[366,123]};function s(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],s=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a.t(s,7)}))}s.keys=function(){return Object.keys(n)},s.id=235,e.exports=s},237:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},245:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(52),r=a.n(c),i=(a(200),a(201),a(30)),l=a(18),o=a(8),u=a(9),d=a(11),j=a(10),b=a(13),h=a(382),m=a(183),p=a(53),f=(a(205),a(0)),O=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={activeItem:""},n}return Object(u.a)(a,[{key:"_jumpHome",value:function(){this.props.history.push("/")}},{key:"handleItemClick",value:function(e,t){var a=this.props.history;this.setState({activeItem:t.name}),a.push("/"+t.name)}},{key:"render",value:function(){var e=this.props.location;this.state.activeItem;return Object(f.jsx)(h.a,{children:Object(f.jsxs)("div",{className:"top-header",children:[Object(f.jsxs)("a",{onClick:this._jumpHome.bind(this),className:"sidemenu__logo",children:[Object(f.jsx)("div",{className:"icon-menu",children:Object(f.jsx)("img",{src:"/img/pigsty/logo-white.svg",alt:"pigsty"})}),Object(f.jsx)("img",{className:"menu-img",src:"/img/pigsty/menulogo.svg",alt:"pigsty"})]}),Object(f.jsxs)(m.a,{secondary:!0,className:"top-header-menu",children:[Object(f.jsxs)(m.a.Item,{name:"",active:"/"===e.pathname,onClick:this.handleItemClick.bind(this),children:[Object(f.jsx)(p.a,{name:"sitemap"}),"Cluster"]}),Object(f.jsxs)(m.a.Item,{name:"jobs",active:"/jobs"===e.pathname,onClick:this.handleItemClick.bind(this),children:[Object(f.jsx)(p.a,{name:"terminal"}),"Jobs"]}),Object(f.jsxs)(m.a.Item,{name:"config",active:"/config"===e.pathname,onClick:this.handleItemClick.bind(this),children:[Object(f.jsx)(p.a,{name:"code"}),"Yaml"]}),Object(f.jsxs)(m.a.Item,{name:"playbook",active:"/playbook"===e.pathname,onClick:this.handleItemClick.bind(this),children:[Object(f.jsx)(p.a,{name:"paper plane outline"}),"Playbook"]}),Object(f.jsx)(m.a.Menu,{position:"right"})]})]})})}}]),a}(s.a.Component),v=Object(l.f)(Object(b.b)((function(e,t){return{}}),(function(e){return{}}))(O));a(210);var x=function(){return Object(f.jsx)("div",{className:"footer",children:Object(f.jsx)("div",{className:"copyright",children:"\xa9 2021 pigsty"})})},g=a(160),C=a(44),y=a.n(C),S=new(a(180).EventEmitter),_=a(12),N=a(71),k=a.n(N),E="",w={GET_CONFIG_DATA_SUCCESS:"GET_CONFIG_DATA_SUCCESS",SAVE_CONFIG_DATA_SUCCESS:"SAVE_CONFIG_DATA_SUCCESS",SAVE_LOCAL_CONFIG_DATA_SUCCESS:"SAVE_LOCAL_CONFIG_DATA_SUCCESS",ADD_NEW_CLUSTER_SUCCESS:"ADD_NEW_CLUSTER_SUCCESS",REMOVE_CLUSTER_SUCCESS:"REMOVE_CLUSTER_SUCCESS",ADD_NEW_CLUSTER_HOST_SUCCESS:"ADD_NEW_CLUSTER_HOST_SUCCESS",REMOVE_CLUSTER_HOST_SUCCESS:"REMOVE_CLUSTER_HOST_SUCCESS",ADD_NEW_CLUSTER_PG_USER_SUCCESS:"ADD_NEW_CLUSTER_PG_USER_SUCCESS",REMOVE_CLUSTER_PG_USER_SUCCESS:"REMOVE_CLUSTER_PG_USER_SUCCESS",ADD_NEW_CLUSTER_PG_DATABASE_SUCCESS:"ADD_NEW_CLUSTER_PG_DATABASE_SUCCESS",REMOVE_CLUSTER_PG_DATABASE_SUCCESS:"REMOVE_CLUSTER_PG_DATABASE_SUCCESS",EDIT_CLUSTER_VARS_SUCCESS:"EDIT_CLUSTER_VARS_SUCCESS",SAVE_LOCAL_CLUSTER_VARS_CONFIG_SUCCESS:"SAVE_LOCAL_CLUSTER_VARS_CONFIG_SUCCESS",SAVE_LOCAL_CLUSTER_CONFIG_SUCCESS:"SAVE_LOCAL_CLUSTER_CONFIG_SUCCESS",GET_CURRENT_JOB_SUCCESS:"GET_CURRENT_JOB_SUCCESS",GET_JOB_LOGS_SUCCESS:"GET_JOB_LOGS_SUCCESS",DELETE_JOB_SUCCESS:"DELETE_JOB_SUCCESS",CREATE_JOB_SUCCESS:"CREATE_JOB_SUCCESS",GET_JOBS_SUCCESS:"GET_JOBS_SUCCESS"},D=a(32);y.a.interceptors.request.use((function(e){return e.timeout=1e4,e.headers={"content-type":"application/x-www-form-urlencoded"},e}),(function(e){return S.emit("showToasts",{type:"error",msg:e}),Promise.reject(e)})),y.a.interceptors.response.use((function(e){return!1===e.data.success&&S.emit("showToasts",{type:"error",msg:e.data}),e}),(function(e){return"Network Error"===e.message||-1!==e.message.indexOf("timeout")?S.emit("showToasts",{type:"error",msg:e.message}):S.emit("showToasts",{type:"error",msg:e.response.data.errorInfo}),Promise.reject(e)}));var U={getConfigData:function(e,t){return function(a){y()({method:"get",url:E+"/api/v1/config/",data:k.a.stringify(Object(_.a)({},e))}).then((function(n){var s;(s="object"==typeof n.data?n.data:D.a.load(n.data)).hasOwnProperty("all")?(a(Object(_.a)({type:w.GET_CONFIG_DATA_SUCCESS,storeName:"configData",data:s},e)),"function"===typeof t&&t({success:!0,data:s})):"function"===typeof t&&t({success:!1,error:n.data})})).catch((function(e){}))}},saveConfigData:function(e,t){return function(a){y()({method:"post",url:E+"/api/v1/config/",data:e}).then((function(e){"ok"===e.data.message&&"function"===typeof t&&t({success:!0,data:e.data})})).catch((function(e){}))}},saveLocalConfigData:function(e,t){return function(a){a(Object(_.a)({type:w.SAVE_LOCAL_CONFIG_DATA_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},addNewCluster:function(e,t){return function(a){a(Object(_.a)({type:w.ADD_NEW_CLUSTER_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},removeCluster:function(e,t){return function(a){a(Object(_.a)({type:w.REMOVE_CLUSTER_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},addNewClusterHost:function(e,t){return function(a){a(Object(_.a)({type:w.ADD_NEW_CLUSTER_HOST_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},removeClusterHost:function(e,t){return function(a){a(Object(_.a)({type:w.REMOVE_CLUSTER_HOST_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},addNewClusterPgUser:function(e,t){return function(a){a(Object(_.a)({type:w.ADD_NEW_CLUSTER_PG_USER_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},removeClusterPgUser:function(e,t){return function(a){a(Object(_.a)({type:w.REMOVE_CLUSTER_PG_USER_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},addNewClusterPgDatabase:function(e,t){return function(a){a(Object(_.a)({type:w.ADD_NEW_CLUSTER_PG_DATABASE_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},removeClusterPgDatabase:function(e,t){return function(a){a(Object(_.a)({type:w.REMOVE_CLUSTER_PG_DATABASE_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},editClusterVars:function(e,t){return function(a){a(Object(_.a)({type:w.EDIT_CLUSTER_VARS_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},saveLocalClusterConfig:function(e,t){return function(a){a(Object(_.a)({type:w.SAVE_LOCAL_CLUSTER_CONFIG_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},saveLocalClusterVarsConfig:function(e,t){return function(a){a(Object(_.a)({type:w.SAVE_LOCAL_CLUSTER_VARS_CONFIG_SUCCESS,storeName:"configData"},e)),"function"===typeof t&&t({success:!0})}},getCurrentJob:function(e,t){return function(a){y()({method:"get",url:E+"/api/v1/job",data:k.a.stringify(Object(_.a)({},e))}).then((function(n){a(Object(_.a)({type:w.GET_CURRENT_JOB_SUCCESS,storeName:"jobs",data:n.data},e)),"function"===typeof t&&t({success:!0,data:n.data})})).catch((function(e){}))}},createJob:function(e,t){return function(a){y()({method:"post",url:E+"/api/v1/job"+e.cmd,data:k.a.stringify(Object(_.a)({},e))}).then((function(n){a(Object(_.a)({type:w.CREATE_JOB_SUCCESS,storeName:"jobs",data:n.data},e)),"function"===typeof t&&t({success:!0,data:n.data})})).catch((function(e){}))}},deleteJob:function(e,t){return function(a){y()({method:"delete",url:E+"/api/v1/job",data:k.a.stringify(Object(_.a)({},e))}).then((function(n){a(Object(_.a)({type:w.DELETE_JOB_SUCCESS,storeName:"jobs",data:n.data},e)),"function"===typeof t&&t({success:!0,data:n.data})})).catch((function(e){"function"===typeof t&&t({success:!0,data:e})}))}},getJobs:function(e,t){return function(a){y()({method:"get",url:E+"/api/v1/job",data:k.a.stringify(Object(_.a)({},e))}).then((function(n){a(Object(_.a)({type:w.GET_JOBS_SUCCESS,storeName:"jobs",data:n.data},e)),"function"===typeof t&&t({success:!0,data:n.data})})).catch((function(e){}))}},getJobLogs:function(e,t){return function(a){y()({method:"get",url:E+"/log/"+e.jobId,data:k.a.stringify(Object(_.a)({},e))}).then((function(n){a(Object(_.a)({type:w.GET_JOB_LOGS_SUCCESS,storeName:"jobLogs",data:n.data},e)),"function"===typeof t&&t({success:!0,data:n.data})})).catch((function(e){}))}}},R=a(390),T=a(391),A=a(108),L=a(383),P=a(394),H=a(387),G=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"_removeClusterHost",value:function(){var e=this.props,t=e.removeClusterHost,a=e.clusterName,n=e.hostName;S.emit("showConfirmBox",{content:"It will remove this cluster host !",callback:function(e){e&&t({clusterName:a,hostName:n},(function(e){}))}})}},{key:"render",value:function(){var e=this.props,t=e.hostData,a=e.hostName,n=[];return t&&(n=Object.keys(t).map((function(e,a){return Object(f.jsxs)(A.a,{children:[e,":",Object(f.jsx)(A.a.Detail,{children:t[e].toString()})]},"k-"+a)}))),Object(f.jsxs)(R.a.Item,{className:"mb-1rem",children:[Object(f.jsx)(g.a,{size:"mini",icon:"trash",basic:!0,className:"right floated no-shadow",onClick:this._removeClusterHost.bind(this)}),Object(f.jsx)(p.a,{name:"hdd outline",className:"left floated",fitted:!0,size:"large"}),Object(f.jsxs)(R.a.Content,{children:[Object(f.jsx)(R.a.Header,{as:"a",children:a}),Object(f.jsx)(R.a.Description,{className:"mt-5px",children:n})]})]})}}]),a}(s.a.Component),I=Object(l.f)(Object(b.b)((function(e,t){return{}}),(function(e){return{removeClusterHost:function(t,a){return e(U.removeClusterHost(t,a))}}}))(G)),V=a(392),J=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.desc;e.buttonText,e.buttomCallback,e.icon;return Object(f.jsxs)(V.a,{warning:!0,children:[t?Object(f.jsx)(V.a.Header,{children:t}):null,Object(f.jsx)("p",{children:a})]})}}]),a}(s.a.Component),B=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"_removeClusterPgUser",value:function(e){var t=this.props,a=t.removeClusterPgUser,n=t.clusterName;S.emit("showConfirmBox",{content:"Are you sure ?",callback:function(t){t&&a({name:e,clusterName:n},(function(e){}))}})}},{key:"render",value:function(){var e=this.props.pgUser;return Object(f.jsxs)(R.a.Item,{className:"mb-5px",children:[Object(f.jsx)(g.a,{size:"mini",icon:"trash",basic:!0,className:"right floated no-shadow",onClick:this._removeClusterPgUser.bind(this,e.name)}),Object(f.jsx)(p.a,{name:"user",className:"left floated",fitted:!0,size:"large"}),Object(f.jsxs)(R.a.Content,{children:[Object(f.jsx)(R.a.Header,{as:"a",children:e.name}),Object(f.jsx)(R.a.Description,{className:"mt-5px",children:e.comment})]})]})}}]),a}(s.a.Component),F=Object(l.f)(Object(b.b)((function(e,t){return{}}),(function(e){return{removeClusterPgUser:function(t,a){return e(U.removeClusterPgUser(t,a))}}}))(B)),q=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"_removeClusterPgDatabase",value:function(e){var t=this.props,a=t.removeClusterPgDatabase,n=t.clusterName;S.emit("showConfirmBox",{content:"Are you sure ?",callback:function(t){t&&a({name:e,clusterName:n},(function(e){}))}})}},{key:"render",value:function(){var e=this.props.pgDatabase;return Object(f.jsxs)(R.a.Item,{className:"mb-5px",children:[Object(f.jsx)(g.a,{size:"mini",icon:"trash",basic:!0,className:"right floated no-shadow",onClick:this._removeClusterPgDatabase.bind(this,e.name)}),Object(f.jsx)(p.a,{name:"database",className:"left floated",fitted:!0,size:"large"}),Object(f.jsxs)(R.a.Content,{children:[Object(f.jsx)(R.a.Header,{as:"a",children:e.name}),Object(f.jsx)(R.a.Description,{className:"mt-5px",children:e.comment})]})]})}}]),a}(s.a.Component),M=Object(l.f)(Object(b.b)((function(e,t){return{}}),(function(e){return{removeClusterPgDatabase:function(t,a){return e(U.removeClusterPgDatabase(t,a))}}}))(q)),z=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"_renderHosts",value:function(){var e=this.props,t=e.clusterData,a=e.clusterName,n=[];return(null===t||void 0===t?void 0:t.hosts)&&(n=Object.keys(null===t||void 0===t?void 0:t.hosts).map((function(e,n){return Object(f.jsx)(I,{clusterName:a,hostName:e,hostData:t.hosts[e]},"key-"+n)}))),0===n.length?Object(f.jsx)(J,{desc:"No hosts"}):Object(f.jsx)(R.a,{children:n})}},{key:"_addNewClusterHost",value:function(){var e=this.props,t=e.clusterName,a=e.clusterData;S.emit("showEditClusterHostForm",{editType:"add",clusterName:t,clusterData:a,callback:function(e){}})}},{key:"_renderPgUsers",value:function(){var e,t=this.props,a=t.clusterData,n=t.clusterName,s=[];return(null===a||void 0===a||null===(e=a.vars)||void 0===e?void 0:e.pg_users)&&(s=a.vars.pg_users.map((function(e,t){return Object(f.jsx)(F,{clusterName:n,pgUser:e},"key-"+t)}))),0===s.length?Object(f.jsx)(J,{desc:"No Pg user"}):Object(f.jsx)(R.a,{children:s})}},{key:"_manageClusterPgUser",value:function(){var e=this.props,t=e.clusterName,a=e.clusterData;S.emit("showEditClusterPgUserForm",{clusterName:t,clusterData:a,callback:function(e){}})}},{key:"_renderPgDatabases",value:function(){var e,t=this.props,a=t.clusterData,n=t.clusterName,s=[];return(null===a||void 0===a||null===(e=a.vars)||void 0===e?void 0:e.pg_databases)&&(s=a.vars.pg_databases.map((function(e,t){return Object(f.jsx)(M,{clusterName:n,pgDatabase:e},"key-"+t)}))),0===s.length?Object(f.jsx)(J,{desc:"No Pg databases"}):Object(f.jsx)(R.a,{children:s})}},{key:"_addNewClusterPgDatabase",value:function(){var e=this.props,t=e.clusterName,a=e.clusterData;S.emit("showEditClusterPgDatabaseForm",{clusterName:t,clusterData:a,callback:function(e){}})}},{key:"_runScript",value:function(){var e=this.props,t=e.clusterName,a=e.createJob;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(e){e&&a({cmd:"?playbook=pgsql&cluster="+t,playbook:"pgsql",cluster:t},(function(e){S.emit("showCmdViewer",{jobId:e.data.data.id,eventName:t})}))}})}},{key:"_removeCluster",value:function(){var e=this.props,t=e.clusterName,a=e.removeCluster,n=this;S.emit("showConfirmBox",{content:"It will remove this cluster !",callback:function(e){e&&a({clusterName:t},(function(e){e.success&&n._saveAllYaml()}))}})}},{key:"_editClusterVars",value:function(){var e=this.props,t=e.clusterData,a=e.clusterName,n=e.saveLocalClusterVarsConfig;S.emit("showCodeEditor",{title:a+".vars",codeData:D.a.dump(t.vars),callback:function(e){var t=null;try{t=D.a.load(e)}catch(s){S.emit("showToasts",{type:"error",msg:s.toString()})}t&&n({configData:t,clusterName:a},(function(e){e.success&&S.emit("showToasts",{type:"success",msg:"save success"})}))}})}},{key:"_editClusterYaml",value:function(){var e=this.props,t=e.clusterData,a=e.clusterName,n=e.saveLocalClusterConfig;S.emit("showCodeEditor",{title:a,codeData:D.a.dump(t),callback:function(e){var t=null;try{t=D.a.load(e)}catch(s){S.emit("showToasts",{type:"error",msg:s.toString()})}t&&n({configData:t,clusterName:a},(function(e){e.success&&S.emit("showToasts",{type:"success",msg:"save success"})}))}})}},{key:"_saveAllYaml",value:function(){var e=this.props,t=e.configData,a=e.saveConfigData,n=JSON.parse(JSON.stringify(t));Object.keys(n.all.children).map((function(e){delete n.all.children[e].edit})),a(D.a.dump(n),(function(e){"ok"===e.data.message?S.emit("showToasts",{type:"success",msg:"save success"}):S.emit("showToasts",{type:"error",msg:e.data.message})}))}},{key:"_destroyCluster",value:function(){var e=this.props,t=e.clusterName,a=e.createJob;S.emit("showConfirmBox",{content:"Are you sure ?",confirmButton:"Destroy",callback:function(e){e&&a({cmd:"?playbook=pgsql-remove&cluster="+t,playbook:"pgsql-remove",cluster:t},(function(e){S.emit("showCmdViewer",{jobId:e.data.id,eventName:t})}))}})}},{key:"render",value:function(){var e,t=this.props,a=t.clusterData,n=t.clusterName,c=0;a.hasOwnProperty("hosts")&&(c=Object.keys(a.hosts).length);var r,i=0;(null===a||void 0===a||null===(e=a.vars)||void 0===e?void 0:e.pg_users)&&(i=null===a||void 0===a||null===(r=a.vars)||void 0===r?void 0:r.pg_users.length);return Object(f.jsx)(s.a.Fragment,{children:Object(f.jsxs)(T.a,{fluid:!0,children:[Object(f.jsxs)(T.a.Content,{children:[Object(f.jsx)(p.a,{name:"server",className:"left floated mr-1rem",size:"large",style:{fontSize:"3rem",color:"#2680eb"}}),Object(f.jsx)("div",{className:"right floated",children:Object(f.jsxs)(g.a,{size:"mini",onClick:this._editClusterVars.bind(this),children:[Object(f.jsx)(p.a,{name:"setting"}),"Vars"]})}),Object(f.jsx)(T.a.Header,{style:{fontSize:"1.4em"},children:n}),Object(f.jsx)("div",{className:"flex-row-left",children:Object(f.jsxs)(T.a.Meta,{children:[Object(f.jsxs)(A.a,{size:"mini",className:"no-background",children:[Object(f.jsx)(p.a,{name:"hdd"})," ",c]}),Object(f.jsxs)(A.a,{size:"mini",className:"no-background",children:[Object(f.jsx)(p.a,{name:"users"})," ",i]})]})}),Object(f.jsx)(L.a,{}),Object(f.jsxs)("div",{className:"flex-row-between mt-1rem",children:[Object(f.jsx)(P.a,{as:"h4",style:{margin:"0"},children:"Hosts"}),Object(f.jsxs)(g.a,{size:"mini",onClick:this._addNewClusterHost.bind(this),children:[Object(f.jsx)(p.a,{name:"plus"}),"New Host"]})]}),Object(f.jsx)(L.a,{}),Object(f.jsx)(T.a.Content,{children:this._renderHosts()}),Object(f.jsxs)("div",{className:"flex-row-between mt-1rem",children:[Object(f.jsx)(P.a,{as:"h4",style:{margin:"0"},children:"Pg Users"}),Object(f.jsxs)(g.a,{size:"mini",onClick:this._manageClusterPgUser.bind(this),children:[Object(f.jsx)(p.a,{name:"plus"}),"New Pg User"]})]}),Object(f.jsx)(L.a,{}),Object(f.jsx)(T.a.Content,{children:this._renderPgUsers()}),Object(f.jsxs)("div",{className:"flex-row-between mt-1rem",children:[Object(f.jsx)(P.a,{as:"h4",style:{margin:"0"},children:"Pg Databases"}),Object(f.jsxs)(g.a,{size:"mini",onClick:this._addNewClusterPgDatabase.bind(this),children:[Object(f.jsx)(p.a,{name:"plus"}),"New Pg Database"]})]}),Object(f.jsx)(L.a,{}),Object(f.jsx)(T.a.Content,{children:this._renderPgDatabases()})]}),Object(f.jsx)(T.a.Content,{extra:!0,children:Object(f.jsxs)("div",{className:"flex-row-right",children:[a.edit?Object(f.jsxs)(g.a,{color:"orange",onClick:this._saveAllYaml.bind(this),children:[Object(f.jsx)(p.a,{name:"save"}),"Save"]}):null,Object(f.jsx)(H.a,{content:"Init cluster",trigger:Object(f.jsx)(g.a,{icon:"play",onClick:this._runScript.bind(this)})}),Object(f.jsx)(H.a,{content:"Destroy cluster",trigger:Object(f.jsx)(g.a,{icon:"bomb",onClick:this._destroyCluster.bind(this)})}),Object(f.jsx)(H.a,{content:"Edit cluster Yaml",trigger:Object(f.jsx)(g.a,{icon:"code",onClick:this._editClusterYaml.bind(this)})}),Object(f.jsx)(H.a,{content:"Delete cluster",trigger:Object(f.jsx)(g.a,{icon:"trash",onClick:this._removeCluster.bind(this)})})]})})]})})}}]),a}(s.a.Component),W=Object(l.f)(Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{removeCluster:function(t,a){return e(U.removeCluster(t,a))},addNewClusterHost:function(t,a){return e(U.addNewClusterHost(t,a))},saveLocalClusterVarsConfig:function(t,a){return e(U.saveLocalClusterVarsConfig(t,a))},saveLocalClusterConfig:function(t,a){return e(U.saveLocalClusterConfig(t,a))},saveConfigData:function(t,a){return e(U.saveConfigData(t,a))},createJob:function(t,a){return e(U.createJob(t,a))}}}))(z)),K=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"_renderClusters",value:function(){var e=this.props.configData;return Object.keys(e.all.children).map((function(t,a){var n=e.all.children[t];return Object(f.jsx)(W,{clusterData:n,clusterName:t},"key-"+a)}))}},{key:"_addNewCluster",value:function(){S.emit("showEditClusterForm",{editType:"add",callback:function(e){}})}},{key:"render",value:function(){return Object(f.jsx)(s.a.Fragment,{children:Object(f.jsxs)("div",{className:"page-wrap",children:[Object(f.jsx)("div",{className:"flex-row-right mb-1rem",children:Object(f.jsxs)(g.a,{primary:!0,onClick:this._addNewCluster.bind(this),children:[Object(f.jsx)(p.a,{name:"plus"}),"New Cluster"]})}),Object(f.jsx)("div",{children:this._renderClusters()})]})})}}]),a}(s.a.Component),Y=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(K),Q=a(62),X=a(389),Z=(a(51),a(388)),$=a(384),ee=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state.cmd;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(t){t&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/infra "+e,eventName:"pigsty-cli"})}})}},{key:"render",value:function(){var e=this;return Object(Q.a)(this.props),Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Infra Provision"}),Object(f.jsx)("div",{className:"lead",children:"How to pull up infrasturcture on meta node"}),Object(f.jsx)("h2",{id:"overview",children:"Overview"}),Object(f.jsxs)("p",{children:["Infrastructure initialization is done via ",Object(f.jsx)("a",{href:"https://github.com/Vonng/pigsty/blob/master/infra.yml",children:Object(f.jsx)("code",{children:"infra.yml"})}),". The script completes the installation and deployment of ",Object(f.jsx)("strong",{children:"infrastructure"})," on the ",Object(f.jsx)("strong",{children:"meta node"}),"."]}),Object(f.jsxs)("p",{children:["``infra.yml",Object(f.jsx)("code",{children:"takes the metanode (default group name"}),"meta`) as the deployment target."]}),Object(f.jsx)("div",{className:"highlight",children:Object(f.jsx)("pre",{children:Object(f.jsx)("code",{className:"language-bash","data-lang":"bash",children:". /infra.yml"})})}),Object(f.jsxs)("p",{children:["! ",Object(f.jsx)("a",{href:"/img/play/infra.svg"})]}),Object(f.jsx)("h2",{id:"caution",children:"Caution"}),Object(f.jsx)("p",{children:Object(f.jsx)("strong",{children:"\u2757\ufe0f The initialization of the meta node must be completed before the initialization of the database node can be executed properly"})}),Object(f.jsxs)("p",{children:[Object(f.jsx)("code",{children:"infra.yml"})," is fixed to work on the group named ",Object(f.jsx)("a",{href:"https://github.com/Vonng/pigsty/blob/master/pigsty.yml#L32",children:Object(f.jsx)("code",{children:"meta"})})," in the configuration file"]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"meta nodes"})," can be reused as ",Object(f.jsx)("strong",{children:"normal nodes"}),", i.e. PostgreSQL databases can be defined and created on meta nodes as well."]}),Object(f.jsxs)("p",{children:["Pigsty recommends using the default configuration and creating a cluster of ",Object(f.jsx)("a",{href:"https://github.com/Vonng/pigsty/blob/master/pigsty.yml#L43",children:Object(f.jsx)("code",{children:"pg-meta"})})," meta-databases on the meta-nodes for hosting Pigsty advanced features."]}),Object(f.jsx)("p",{children:"A complete execution of the initialization process can take 2 to 8 minutes, depending on the machine configuration."}),Object(f.jsx)("h2",{id:"selective-execution",children:"Selective execution"}),Object(f.jsxs)("p",{children:["Users can ",Object(f.jsx)("strong",{children:"selectively execute"})," a subset of scripts through ansible\u2019s tagging mechanism."]}),Object(f.jsx)("p",{children:"For example, if you want to execute only the local source initialization part, you can do so with the following command."}),Object(f.jsx)("div",{className:"highlight",children:Object(f.jsx)("pre",{children:Object(f.jsxs)("code",{className:"language-bash","data-lang":"bash",children:[". /infra.yml --tags",Object(f.jsx)("span",{children:"="}),"repo"]})})}),Object(f.jsxs)("p",{children:["Please refer to [",Object(f.jsx)("strong",{children:"task details"}),"](#task details) for specific tags"]}),Object(f.jsx)("p",{children:"Some common subsets of tasks include."}),Object(f.jsx)("div",{className:"highlight",children:Object(f.jsx)("pre",{children:Object(f.jsxs)("code",{className:"language-bash","data-lang":"bash",children:[". /infra.yml --tags",Object(f.jsx)("span",{children:"="}),"repo -e ",Object(f.jsx)("span",{children:"repo_rebuild"}),Object(f.jsx)("span",{children:"="}),Object(f.jsx)("span",{children:"true"}),Object(f.jsx)("span",{children:"# Force a local source to be recreated"}),". /infra.yml --tags",Object(f.jsx)("span",{children:"="}),"prometheus_reload ",Object(f.jsx)("span",{children:"# Reload Prometheus configuration"}),". /infra.yml --tags",Object(f.jsx)("span",{children:"="}),"nginx_haproxy ",Object(f.jsx)("span",{children:"# Regenerate the Nginx Haproxy index page"}),". /infra.yml --tags",Object(f.jsx)("span",{children:"="}),"prometheus_targets,prometheus_reload ",Object(f.jsx)("span",{children:"# Regenerate the Prometheus static monitoring object file and apply"})]})})}),Object(f.jsx)("h2",{id:"script-description",children:"script description"}),Object(f.jsxs)("p",{children:[Object(f.jsx)("a",{href:"https://github.com/Vonng/pigsty/blob/master/infra.yml",children:Object(f.jsx)("code",{children:"infra.yml"})})," does the following stuff:"]}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:"Deploy and enable local sources"}),Object(f.jsx)("li",{children:"Complete metanode initialization"}),Object(f.jsxs)("li",{children:["Complete meta-node infrastructure initialization",Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:"CA infrastructure"}),Object(f.jsx)("li",{children:"DNS Nameserver"}),Object(f.jsx)("li",{children:"Nginx"}),Object(f.jsx)("li",{children:"Prometheus & Alertmanger"}),Object(f.jsx)("li",{children:"Grafana"})]})]}),Object(f.jsx)("li",{children:"Copy the Pigsty ontology to the meta node"}),Object(f.jsx)("li",{children:"Complete database initialization on the meta node (optional, users can reuse the meta node through the standard database cluster initialization process)"})]})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"12rem"},children:"./infra.yml "}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),te=Object(b.b)((function(e,t){return{}}),(function(e){return{}}))(ee),ae=a(385),ne=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state,t=e.clusterName,a=e.cmd;if(0===t.length)return!1;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(e){e&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/pgsql -l "+t+" "+a,eventName:t})}})}},{key:"render",value:function(){var e=this,t=this.props.configData,a=Object.keys(t.all.children).map((function(e){return{key:e,text:e,value:e}}));return Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Pgsql Provision"}),Object(f.jsx)("div",{className:"lead",children:"How to define and create postgres clusters?"})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"18rem"},children:"./pgsql.yml -l "}),Object(f.jsx)(ae.a,{className:"code",style:{width:"14rem"},compact:!0,options:a,onChange:function(t,a){a.name;var n=a.value;e.setState({clusterName:n})}}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),se=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(ne),ce=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state.cmd;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(t){t&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/sandbox "+e,eventName:"pigsty-cli"})}})}},{key:"render",value:function(){var e=this;return Object(Q.a)(this.props),Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Sandbox Provision"}),Object(f.jsx)("div",{className:"lead",children:"How to perform one-pass bootstrap for sandbox?"})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"12rem"},children:"./sandbox.yml "}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),re=Object(b.b)((function(e,t){return{}}),(function(e){return{}}))(ce),ie=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state,t=e.clusterName,a=e.cmd;if(0===t.length)return!1;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(e){e&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/pgsql-remove -l "+t+" "+a,eventName:t})}})}},{key:"render",value:function(){var e=this,t=this.props.configData,a=Object.keys(t.all.children).map((function(e){return{key:e,text:e,value:e}}));return Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Remove Clusters"}),Object(f.jsx)("div",{className:"lead",children:"How to destroy postgres clusters and instances"})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"32rem"},children:"./pgsql-remove.yml -l "}),Object(f.jsx)(ae.a,{className:"code",style:{width:"14rem"},compact:!0,options:a,onChange:function(t,a){a.name;var n=a.value;e.setState({clusterName:n})}}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),le=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(ie),oe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state,t=e.clusterName,a=e.cmd;if(0===t.length)return!1;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(e){e&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/pgsql-monitor -l "+t+" "+a,eventName:t})}})}},{key:"render",value:function(){var e=this,t=this.props.configData,a=Object.keys(t.all.children).map((function(e){return{key:e,text:e,value:e}}));return Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Monitor Only"}),Object(f.jsx)("div",{className:"lead",children:"How to deploy pigsty monitoring system without provisioning solution?"})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"32rem"},children:"./pgsql-monitor.yml -l "}),Object(f.jsx)(ae.a,{className:"code",style:{width:"14rem"},compact:!0,options:a,onChange:function(t,a){a.name;var n=a.value;e.setState({clusterName:n})}}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),ue=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(oe),de=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state,t=e.clusterName,a=e.cmd;if(0===t.length)return!1;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(e){e&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/pgsql-createuser -l "+t+" "+a,eventName:t})}})}},{key:"render",value:function(){var e=this,t=this.props.configData,a=Object.keys(t.all.children).map((function(e){return{key:e,text:e,value:e}}));return Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Create User"}),Object(f.jsx)("div",{className:"lead",children:"How to perform one-pass bootstrap for sandbox?"})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"33rem"},children:"./pgsql-createuser.yml -l "}),Object(f.jsx)(ae.a,{className:"code",style:{width:"14rem"},compact:!0,options:a,onChange:function(t,a){a.name;var n=a.value;e.setState({clusterName:n})}}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),je=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(de),be=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state,t=e.clusterName,a=e.cmd;if(0===t.length)return!1;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(e){e&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/pgsql-createdb -l "+t+" "+a,eventName:t})}})}},{key:"render",value:function(){var e=this,t=this.props.configData,a=Object.keys(t.all.children).map((function(e){return{key:e,text:e,value:e}}));return Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Create Database"}),Object(f.jsx)("div",{className:"lead",children:"How to create new database on running clusters?"})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"32rem"},children:"./pgsql-createdb.yml -l "}),Object(f.jsx)(ae.a,{className:"code",style:{width:"14rem"},compact:!0,options:a,onChange:function(t,a){a.name;var n=a.value;e.setState({clusterName:n})}}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),he=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(be),me=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"runScript",value:function(){var e=this.state,t=e.clusterName,a=e.cmd;if(0===t.length)return!1;S.emit("showConfirmBox",{content:"Are you sure run this script ?",confirmButton:"Run",callback:function(e){e&&S.emit("showCmdViewer",{sseUrl:E+"/api/v1/pgsql-service -l "+t+" "+a,eventName:t})}})}},{key:"render",value:function(){var e=this,t=this.props.configData,a=Object.keys(t.all.children).map((function(e){return{key:e,text:e,value:e}}));return Object(f.jsxs)("div",{className:"playbook-item",children:[Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Service Provision"}),Object(f.jsx)("div",{className:"lead",children:"How to perform one-pass bootstrap for sandbox?"})]}),Object(f.jsx)(Z.a,{className:"playbook-item-run-script",children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Run Script"}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("code",{className:"code",style:{width:"32rem"},children:"./pgsql-service.yml -l "}),Object(f.jsx)(ae.a,{className:"code",style:{width:"14rem"},compact:!0,options:a,onChange:function(t,a){a.name;var n=a.value;e.setState({clusterName:n})}}),Object(f.jsx)($.a,{fluid:!0,className:"code",placeholder:"--tags=",onChange:function(t,a){a.name;var n=a.value;e.setState({cmd:n})}}),Object(f.jsx)(g.a,{primary:!0,type:"submit",onClick:this.runScript.bind(this),children:"Run"})]})]})})]})}}]),a}(s.a.Component),pe=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(me),fe=[{menuItem:{key:"infraProvision",icon:"arrow alternate circle right outline",content:"Infra Provision"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(te,{})})}},{menuItem:{key:"pgsqlProvision",icon:"arrow alternate circle right outline",content:"Pgsql Provision"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(se,{})})}},{menuItem:{key:"sandboxProvision",icon:"arrow alternate circle right outline",content:"Sandbox Provision"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(re,{})})}},{menuItem:{key:"removeClusters",icon:"arrow alternate circle right outline",content:"Remove Clusters"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(le,{})})}},{menuItem:{key:"monitorOnly",icon:"arrow alternate circle right outline",content:"Monitor Only"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(ue,{})})}},{menuItem:{key:"createUser",icon:"arrow alternate circle right outline",content:"Create User"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(je,{})})}},{menuItem:{key:"createDatabase",icon:"arrow alternate circle right outline",content:"Create Database"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(he,{})})}},{menuItem:{key:"serviceProvision",icon:"arrow alternate circle right outline",content:"Service Provision"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"playbook-pane",children:Object(f.jsx)(pe,{})})}}],Oe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(Q.a)(this.props),Object(f.jsx)("div",{className:"page-wrap playbook",children:Object(f.jsx)(X.a,{menu:{fluid:!0,vertical:!0,tabular:!0},panes:fe})})}}]),a}(s.a.Component),ve=Object(b.b)((function(e,t){return{}}),(function(e){return{}}))(Oe),xe=(a(231),a(90)),ge=(a(150),a(151),a(112),a(152),a(153),a(237),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).codeM=null,n}return Object(u.a)(a,[{key:"_goToPlaybook",value:function(){this.props.history.push("/playbook")}},{key:"_saveYaml",value:function(){var e=this.props,t=e.saveLocalConfigData,a=e.saveConfigData,n=null;try{n=D.a.load(this.codeM.editor.getValue())}catch(s){S.emit("showToasts",{type:"error",msg:s.toString()})}n&&t({data:n},(function(e){if(e.success){var t=JSON.parse(JSON.stringify(n));Object.keys(t.all.children).map((function(e){delete t.all.children[e].edit})),a(D.a.dump(t),(function(e){"ok"===e.data.message?S.emit("showToasts",{type:"success",msg:"save success"}):S.emit("showToasts",{type:"error",msg:e.data.message})}))}}))}},{key:"render",value:function(){var e=this.props.configData,t=this,a=JSON.parse(JSON.stringify(e));Object.keys(a.all.children).map((function(e){delete a.all.children[e].edit}));var n=D.a.dump(a);return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"codeViewer",children:Object(f.jsx)(xe.a,{ref:function(e){(null===e||void 0===e?void 0:e.editor)&&(t.codeM=e)},value:n,options:{theme:"monokai",tabSize:2,keyMap:"sublime",mode:"yaml"}})}),Object(f.jsx)(L.a,{}),Object(f.jsxs)("div",{children:[Object(f.jsx)(g.a,{primary:!0,onClick:this._saveYaml.bind(this),children:"Save YAML"}),Object(f.jsxs)(g.a,{onClick:this._goToPlaybook.bind(this),children:[Object(f.jsx)(p.a,{name:"paper plane outline"}),"Go to Playbook"]})]})]})}}]),a}(s.a.Component)),Ce=Object(l.f)(Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{saveLocalConfigData:function(t,a){return e(U.saveLocalConfigData(t,a))},saveConfigData:function(t,a){return e(U.saveConfigData(t,a))}}}))(ge)),ye=[{menuItem:{key:"YAML",icon:"code",content:"YAML"},render:function(){return Object(f.jsx)(X.a.Pane,{children:Object(f.jsx)(Ce,{})})}}],Se=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){return Object(Q.a)(this.props),Object(f.jsx)("div",{className:"page-wrap pigsty-config",children:Object(f.jsx)(X.a,{panes:ye})})}}]),a}(s.a.Component),_e=Object(b.b)((function(e,t){return{}}),(function(e){return{}}))(Se),Ne=(a(154),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"render",value:function(){this.props.configData;return Object(f.jsx)("div",{className:"playbook-item",children:Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Create User"}),Object(f.jsx)("div",{className:"lead",children:"How to perform one-pass bootstrap for sandbox?"})]})})}}]),a}(s.a.Component)),ke=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(Ne),Ee=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={clusterName:"",cmd:""},n}return Object(u.a)(a,[{key:"render",value:function(){this.props.configData;return Object(f.jsx)("div",{className:"playbook-item",children:Object(f.jsxs)("div",{className:"playbook-item-intro",children:[Object(f.jsx)("h1",{children:"Create User"}),Object(f.jsx)("div",{className:"lead",children:"How to perform one-pass bootstrap for sandbox?"})]})})}}]),a}(s.a.Component),we=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{}}))(Ee),De=[{menuItem:{key:"currentJobLog",icon:"arrow alternate circle right outline",content:"Current Job"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"job-pane",children:Object(f.jsx)(ke,{})})}},{menuItem:{key:"historyJobs",icon:"arrow alternate circle right outline",content:"History Jobs"},render:function(){return Object(f.jsx)(X.a.Pane,{className:"job-pane",children:Object(f.jsx)(we,{})})}}],Ue=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"_renderJobs",value:function(){var e=this.props.configData;return Object.keys(e.all.children).map((function(t,a){e.all.children[t];return null}))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"page-wrap jobs",children:Object(f.jsx)(X.a,{menu:{fluid:!0,vertical:!0,tabular:!0},panes:De})})}}]),a}(s.a.Component),Re=Object(b.b)((function(e,t){return{configData:e.configData,jobs:e.jobs}}),(function(e){return{getJobs:function(t,a){return e(U.getJobs(t,a))}}}))(Ue),Te=a(143),Ae=(a(238),a(239),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).cmdUrl="",n.state={open:!1,renderCode:"Loading...",eventName:"",sseUrl:"",jobId:""},n.line=0,n.codeMirrorRef=null,n.streamSSE=null,n.timer=null,n.timerGap=3e3,n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showCmdViewer",(function(t){e.setState({open:!0,renderCode:"Loading...",sseUrl:t.sseUrl,eventName:t.eventName,jobId:t.jobId},(function(){e._startLogTimer()}))}))}},{key:"_startLogTimer",value:function(){var e=this.state.jobId,t=this.props.getJobLogs,a=this;this.timer=setInterval((function(){t({jobId:e},(function(e){a.setState({renderCode:e.data})}))}),this.timerGap)}},{key:"closeModal",value:function(){this.streamSSE&&this.streamSSE.close(),this.timer&&clearInterval(this.timer),this.setState({open:!1})}},{key:"_openSSE",value:function(){var e,t=this.state,a=t.eventName,n=t.sseUrl,s=this;this.streamSSE&&this.streamSSE.close(),this.streamSSE=new EventSource(n),null===(e=this.streamSSE)||void 0===e||e.addEventListener(a,(function(e){s.setState({renderCode:s.state.renderCode+e.data},(function(){s.codeMirrorRef.editor&&s.codeMirrorRef.editor.scrollTo(0,s.codeMirrorRef.editor.getScrollInfo().height)}))}))}},{key:"stopCmd",value:function(){var e=this.state.jobId,t=this.props.deleteJob;S.emit("showConfirmBox",{content:"Are you sure stop this script ?",confirmButton:"Stop",callback:function(a){a&&t({jobid:e},(function(e){"job deleted"===e.data.message?S.emit("showToasts",{type:"success",msg:"save success"}):S.emit("showToasts",{type:"error",msg:e.data.message})}))}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.renderCode,n=t.open;return Object(f.jsxs)(Te.a,{closeIcon:!0,open:n,centered:!1,className:"modal-cmdviewer",onClose:this.closeModal.bind(this),children:[Object(f.jsx)(Te.a.Header,{children:"Console Logs"}),Object(f.jsx)(Te.a.Content,{scrolling:!0,children:Object(f.jsx)("div",{className:"cmdViewer",children:Object(f.jsx)(xe.a,{ref:function(t){e.codeMirrorRef=t},value:a,options:{theme:"monokai",tabSize:2,keyMap:"sublime",mode:"shell",readOnly:"nocursor",lineNumbers:!1,autofocus:!1}})})}),Object(f.jsxs)(Te.a.Actions,{children:[Object(f.jsx)(g.a,{onClick:this.stopCmd.bind(this),children:"Stop"}),Object(f.jsx)(g.a,{primary:!0,onClick:this.closeModal.bind(this),children:"Close"})]})]})}}]),a}(s.a.Component)),Le=Object(l.f)(Object(b.b)((function(e,t){return{jobs:e.jobs}}),(function(e){return{getJobLogs:function(t,a){return e(U.getJobLogs(t,a))},deleteJob:function(t,a){return e(U.deleteJob(t,a))}}}))(Ae)),Pe=(a(240),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).codeM=null,n.state={open:!1,codeData:"",title:"code editor"},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showCodeEditor",(function(t){e.setState({open:!0,codeData:t.codeData,title:t.title||"Code editor"},(function(){e.parentCallback=t.callback}))}))}},{key:"closeModal",value:function(){this.setState({open:!1})}},{key:"saveCode",value:function(){var e=this,t=this.codeM.editor.getValue(),a=null;try{a=D.a.load(t)}catch(n){S.emit("showToasts",{type:"error",msg:n.toString()})}a&&this.setState({open:!1},(function(){e.parentCallback(t)}))}},{key:"render",value:function(){var e=this.state,t=e.open,a=e.title,n=e.codeData,s=this;return Object(f.jsxs)(Te.a,{closeIcon:!0,open:t,centered:!1,className:"modal-codeEditor",onClose:this.closeModal.bind(this),children:[Object(f.jsx)(Te.a.Header,{children:a}),Object(f.jsx)(Te.a.Content,{scrolling:!0,children:Object(f.jsx)("div",{className:"codeEditor",children:Object(f.jsx)(xe.a,{ref:function(e){(null===e||void 0===e?void 0:e.editor)&&(s.codeM=e)},value:n,options:{theme:"monokai",tabSize:2,keyMap:"sublime",mode:"yaml"}})})}),Object(f.jsxs)(Te.a.Actions,{children:[Object(f.jsx)(g.a,{onClick:this.closeModal.bind(this),children:"Close"}),Object(f.jsx)(g.a,{primary:!0,onClick:this.saveCode.bind(this),children:"Save"})]})]})}}]),a}(s.a.Component)),He=a(27),Ge=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={open:!1,editType:"add",clusterName:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showEditClusterForm",(function(t){e.setState(Object(_.a)({open:!0},t))}))}},{key:"_editCluster",value:function(){var e=this,t=this.props.addNewCluster,a=this.state.clusterName;if(0===a.length||a.length>50)return S.emit("showToasts",{type:"error",msg:"cluster name length error"}),!1;t({clusterName:a},(function(t){e.setOpen(!1)}))}},{key:"setOpen",value:function(e){this.setState({open:e,clusterName:"",editType:"add"})}},{key:"_inputChange",value:function(e,t){this.setState(Object(He.a)({},e,t))}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.clusterName,s=t.editType;return Object(f.jsxs)(Te.a,{onClose:this.setOpen.bind(this,!1),open:a,size:"mini",children:[Object(f.jsx)(Te.a.Header,{children:"add"===s?"Add Cluster":"Edit Cluster"}),Object(f.jsx)(Te.a.Content,{children:Object(f.jsx)(Z.a,{children:Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Cluster Name"}),Object(f.jsx)(Z.a.Input,{value:n,placeholder:"name",name:"clusterName",onChange:function(t,a){var n=a.name,s=a.value;e._inputChange(n,s)}})]})})}),Object(f.jsxs)(Te.a.Actions,{children:[Object(f.jsx)(g.a,{basic:!0,onClick:this.setOpen.bind(this,!1),children:"Cancel"}),Object(f.jsx)(g.a,{primary:!0,onClick:this._editCluster.bind(this),children:"Save"})]})]})}}]),a}(s.a.Component),Ie=Object(l.f)(Object(b.b)((function(e,t){return{}}),(function(e){return{addNewCluster:function(t,a){return e(U.addNewCluster(t,a))}}}))(Ge)),Ve=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={open:!1,editType:"add",pg_offline_query:!1,host_ip:"",pg_role:"",pg_seq:1,clusterName:null,clusterData:null},n.roleOptions=[],n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showEditClusterHostForm",(function(t){e.roleOptions=[{key:"p",text:"primary",value:"primary"},{key:"r",text:"replica",value:"replica"},{key:"o",text:"offline",value:"offline"},{key:"s",text:"standby",value:"standby"},{key:"d",text:"delayed",value:"delayed"}];var a="primary";0!=Object.keys(t.clusterData.hosts).length&&Object.keys(t.clusterData.hosts).forEach((function(e,n){var s;"primary"===(null===(s=t.clusterData.hosts[e])||void 0===s?void 0:s.pg_role)&&(a="replica")})),e.setState(Object(_.a)(Object(_.a)({open:!0},t),{},{pg_role:a}))}))}},{key:"setOpen",value:function(e){this.setState({open:e})}},{key:"_inputHandle",value:function(e,t){this.setState(Object(He.a)({},e,t))}},{key:"_editClusterHost",value:function(){var e=this,t=this.props.addNewClusterHost,a=this.state,n=a.pg_offline_query,s=a.host_ip,c=a.pg_role,r=a.pg_seq,i=a.clusterName;i&&t({pg_offline_query:n,host_ip:s,pg_role:c,pg_seq:r,clusterName:i},(function(t){e.setOpen(!1)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.pg_offline_query,s=t.host_ip,c=t.pg_role,r=t.pg_seq,i=t.editType;t.clusterData,this.props.configData;return a?Object(f.jsxs)(Te.a,{onClose:this.setOpen.bind(this,!1),open:a,size:"mini",children:[Object(f.jsx)(Te.a.Header,{children:"add"===i?"Add Cluster Host":"Edit Cluster Host"}),Object(f.jsx)(Te.a.Content,{children:Object(f.jsxs)(Z.a,{children:[Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Node IP (Inventory Hostname)"}),Object(f.jsx)($.a,{placeholder:"0.0.0.0",name:"host_ip",value:s,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"Instance Sequence"}),Object(f.jsx)($.a,{placeholder:"1",name:"pg_seq",value:r,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,parseInt(s))}})]}),Object(f.jsxs)(Z.a.Group,{inline:!0,children:[Object(f.jsx)("label",{children:"Offline Query"}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"pg_offline_query",checked:!0===n,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"pg_offline_query",checked:!1===n,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]}),Object(f.jsx)(Z.a.Field,{children:Object(f.jsx)(Z.a.Select,{fluid:!0,label:"Role",options:this.roleOptions,name:"pg_role",placeholder:"",value:c,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})})]})}),Object(f.jsxs)(Te.a.Actions,{children:[Object(f.jsx)(g.a,{basic:!0,onClick:this.setOpen.bind(this,!1),children:"Cancel"}),Object(f.jsx)(g.a,{primary:!0,onClick:this._editClusterHost.bind(this),children:"Save"})]})]}):null}}]),a}(s.a.Component),Je=Object(l.f)(Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{addNewClusterHost:function(t,a){return e(U.addNewClusterHost(t,a))}}}))(Ve)),Be=a(64),Fe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={open:!1,editType:"add",name:"",password:"",login:null,superuser:null,createdb:null,createrole:null,inherit:null,replication:null,bypassrls:null,connlimit:-1,expire_at:"2030-12-31",parameters:{search_path:"public"},roles:["dbrole_offline"],expire_in:365,pgbouncer:null,comment:"",clusterData:null,parameterKey:"",parameterValue:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showEditClusterPgUserForm",(function(t){e.setState(Object(_.a)({open:!0},t))}))}},{key:"setOpen",value:function(e){this.setState({open:e})}},{key:"_inputHandle",value:function(e,t){this.setState(Object(He.a)({},e,t))}},{key:"_addParameter",value:function(){var e=this.state,t=e.parameterKey,a=e.parameterValue;t.length>0&&a.length>0&&this.setState({parameters:Object(_.a)(Object(_.a)({},this.state.parameters),{},Object(He.a)({},t,a)),parameterKey:"",parameterValue:""})}},{key:"_deleteParameter",value:function(e){delete this.state.parameters[e],this.setState({parameters:Object(_.a)({},this.state.parameters)})}},{key:"_checkboxHandle",value:function(e,t,a){a?this.setState(Object(He.a)({},e,[].concat(Object(Be.a)(this.state[e]),[t]))):(this.state[e].splice(this.state[e].findIndex((function(e){return e===t})),1),this.setState(Object(He.a)({},e,this.state[e])))}},{key:"_editClusterPgUser",value:function(){}},{key:"_addNewClusterPgUser",value:function(){var e=this,t=this.props.addNewClusterPgUser,a=this.state,n=a.name,s=a.password,c=a.login,r=a.superuser,i=a.createdb,l=a.createrole,o=a.inherit,u=a.replication,d=a.bypassrls,j=a.connlimit,b=a.expire_at,h=a.parameters,m=a.roles,p=(a.expire_in,a.pgbouncer),f=a.comment,O=a.clusterName,v={name:n,password:s,roles:m,parameters:h,expire_at:b,connlimit:j};f.length>0&&(v.comment=f),null!=c&&(v.login=c),null!=r&&(v.superuser=r),null!=i&&(v.createdb=i),null!=l&&(v.createrole=l),null!=o&&(v.inherit=o),null!=u&&(v.replication=u),null!=d&&(v.bypassrls=d),null!=p&&(v.pgbouncer=p),t({formData:v,clusterName:O},(function(t){t.success&&e.setState({open:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=(t.editType,t.name),s=t.password,c=t.login,r=t.superuser,i=t.createdb,l=t.createrole,o=t.inherit,u=t.replication,d=t.bypassrls,j=t.connlimit,b=t.expire_at,h=t.parameters,m=t.roles,p=(t.expire_in,t.pgbouncer),O=t.comment,v=t.parameterKey,x=t.parameterValue,C=Object.keys(h).map((function(t,a){return Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"m",children:[Object(f.jsx)(Z.a.Input,{value:t,placeholder:"key",disabled:!0,style:{color:"#333"}}),Object(f.jsx)(Z.a.Input,{value:h[t],placeholder:"value",disabled:!0,style:{color:"#333"}}),Object(f.jsx)(g.a,{type:"submit",icon:"minus",onClick:e._deleteParameter.bind(e,t)})]},"key"+a)}));return Object(f.jsxs)(Te.a,{onClose:this.setOpen.bind(this,!1),open:a,size:"small",children:[Object(f.jsx)(Te.a.Header,{children:"Manage Cluster Pg Users"}),Object(f.jsx)(Te.a.Content,{children:Object(f.jsxs)(Z.a,{children:[Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"border-bottom pb-5px",children:[Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"name"}),Object(f.jsx)($.a,{placeholder:"",name:"name",value:n,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"password"}),Object(f.jsx)($.a,{placeholder:"",name:"password",value:s,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"comment"}),Object(f.jsx)($.a,{placeholder:"example personal user for interactive queries",name:"comment",value:O,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]})]}),Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"border-bottom plr-05rem pb-5px",children:[Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"login"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"login",checked:null===c,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"login",checked:!0===c,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"login",checked:!1===c,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]}),Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"superuser"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"superuser",checked:null===r,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"superuser",checked:!0===r,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"superuser",checked:!1===r,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]})]}),Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"border-bottom plr-05rem pb-5px",children:[Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"createdb"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"createdb",checked:null===i,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"createdb",checked:!0===i,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"createdb",checked:!1===i,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]}),Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"createrole"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"createrole",checked:null===l,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"createrole",checked:!0===l,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"createrole",checked:!1===l,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]})]}),Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"border-bottom plr-05rem pb-5px",children:[Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"inherit"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"inherit",checked:null===o,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"inherit",checked:!0===o,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"inherit",checked:!1===o,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]}),Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"replication"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"replication",checked:null===u,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"replication",checked:!0===u,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"replication",checked:!1===u,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]})]}),Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"border-bottom plr-05rem pb-5px",children:[Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"bypassrls"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"bypassrls",checked:null===d,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"bypassrls",checked:!0===d,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"bypassrls",checked:!1===d,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]}),Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"pgbouncer"}),Object(f.jsx)(Z.a.Radio,{label:"null",name:"pgbouncer",checked:null===p,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,null)}}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"pgbouncer",checked:!0===p,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"pgbouncer",checked:!1===p,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"roles (Separated by commas)"}),Object(f.jsx)($.a,{placeholder:"role,role",name:"roles",value:m.join(","),onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s.split(","))}})]}),Object(f.jsxs)(Z.a.Group,{widths:"equal",children:[Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"connlimit"}),Object(f.jsx)($.a,{placeholder:"",name:"connlimit",value:j,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"expire_at"}),Object(f.jsx)($.a,{placeholder:"",name:"expire_at",value:b,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"parameters"}),Object(f.jsxs)(Z.a.Group,{widths:"equal",children:[Object(f.jsx)(Z.a.Input,{name:"parameterKey",value:v,placeholder:"key",onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}}),Object(f.jsx)(Z.a.Input,{name:"parameterValue",value:x,placeholder:"value",onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}}),Object(f.jsx)(g.a,{type:"submit",icon:"plus",onClick:this._addParameter.bind(this)})]}),Object(f.jsx)("div",{children:C})]})]})}),Object(f.jsxs)(Te.a.Actions,{children:[Object(f.jsx)(g.a,{onClick:this.setOpen.bind(this,!1),children:"Cancel"}),Object(f.jsx)(g.a,{primary:!0,onClick:this._addNewClusterPgUser.bind(this),children:"Save"})]})]})}}]),a}(s.a.Component),qe=Object(l.f)(Object(b.b)((function(e,t){return{}}),(function(e){return{addNewClusterPgUser:function(t,a){return e(U.addNewClusterPgUser(t,a))}}}))(Fe)),Me=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={open:!1,editType:"add",name:"",owner:"",schemas:[],extensions:[],parameters:{},comment:"",pgbouncer:!0,allowconn:!0,revokeconn:!1,clusterName:null,parameterKey:"",parameterValue:"",extensionKey:"",extensionValue:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showEditClusterPgDatabaseForm",(function(t){e.setState(Object(_.a)({open:!0},t))}))}},{key:"setOpen",value:function(e){this.setState({open:e})}},{key:"_inputHandle",value:function(e,t){this.setState(Object(He.a)({},e,t))}},{key:"_addNewClusterPgDatabase",value:function(){var e=this,t=this.props.addNewClusterPgDatabase,a=this.state,n=a.name,s=a.owner,c=a.schemas,r=a.extensions,i=a.parameters,l=a.comment,o=a.pgbouncer,u=a.allowconn,d=a.revokeconn,j=a.clusterName,b={name:n,owner:s,schemas:c,pgbouncer:o,allowconn:u,revokeconn:d,parameters:i};l.length>0&&(b.comment=l),r.length>0&&(b.extensions=r),j&&t({formData:b,clusterName:j},(function(t){t.success&&e.setState({open:!1})}))}},{key:"_addParameter",value:function(){var e=this.state,t=e.parameterKey,a=e.parameterValue;t.length>0&&a.length>0&&this.setState({parameters:Object(_.a)(Object(_.a)({},this.state.parameters),{},Object(He.a)({},t,a)),parameterKey:"",parameterValue:""})}},{key:"_deleteParameter",value:function(e){delete this.state.parameters[e],this.setState({parameters:Object(_.a)({},this.state.parameters)})}},{key:"_addExtension",value:function(){var e=this.state,t=e.extensionKey,a=e.extensionValue;if(t.length>0){var n={name:t};a.length>0&&(n.schema=a),this.setState({extensions:[].concat(Object(Be.a)(this.state.extensions),[n]),extensionKey:"",extensionValue:""})}}},{key:"_deleteExtension",value:function(e){var t=this.state.extensions.map((function(t,a){return JSON.stringify(t)!=JSON.stringify(e)}));this.setState({extensions:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.name,s=t.owner,c=t.parameters,r=t.schemas,i=t.extensions,l=t.comment,o=t.pgbouncer,u=t.allowconn,d=t.revokeconn,j=t.editType,b=t.parameterKey,h=t.parameterValue,m=t.extensionKey,p=t.extensionValue,O=Object.keys(c).map((function(t,a){return Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"m",children:[Object(f.jsx)(Z.a.Input,{value:t,placeholder:"key",disabled:!0,style:{color:"#333"}}),Object(f.jsx)(Z.a.Input,{value:c[t],placeholder:"value",disabled:!0,style:{color:"#333"}}),Object(f.jsx)(g.a,{type:"submit",icon:"minus",onClick:e._deleteParameter.bind(e,t)})]})})),v=i.map((function(t,a){return Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"m",children:[Object(f.jsx)($.a,{value:t.name,placeholder:"name",disabled:!0,label:"name",style:{color:"#333"},className:"field"}),t.schema?Object(f.jsx)($.a,{value:t.schema,placeholder:"schema",disabled:!0,label:"schema",style:{color:"#333"},className:"field"}):null,Object(f.jsx)(g.a,{type:"submit",icon:"minus",onClick:e._deleteExtension.bind(e,t)})]})}));return Object(f.jsxs)(Te.a,{onClose:this.setOpen.bind(this,!1),open:a,size:"small",children:[Object(f.jsx)(Te.a.Header,{children:"add"===j?"Add Cluster Host":"Edit Cluster Host"}),Object(f.jsx)(Te.a.Content,{children:Object(f.jsxs)(Z.a,{children:[Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"border-bottom pb-5px",children:[Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"name"}),Object(f.jsx)($.a,{placeholder:"",name:"name",value:n,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"owner"}),Object(f.jsx)($.a,{placeholder:"",name:"owner",value:s,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"comment"}),Object(f.jsx)($.a,{placeholder:"",name:"comment",value:l,onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}})]}),Object(f.jsxs)(Z.a.Group,{widths:"equal",className:"border-bottom plr-05rem pb-5px",children:[Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"pgbouncer"}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"pgbouncer",checked:!0===o,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"pgbouncer",checked:!1===o,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]}),Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"allowconn"}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"allowconn",checked:!0===u,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"allowconn",checked:!1===u,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]})]}),Object(f.jsx)(Z.a.Group,{widths:"equal",className:"border-bottom plr-05rem pb-5px",children:Object(f.jsxs)(Z.a.Group,{inline:!0,className:"flex-1",children:[Object(f.jsx)("label",{children:"revokeconn"}),Object(f.jsx)(Z.a.Radio,{label:"true",name:"revokeconn",checked:!0===d,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!0)}}),Object(f.jsx)(Z.a.Radio,{label:"false",name:"revokeconn",checked:!1===d,onChange:function(t,a){var n=a.name;a.value;e._inputHandle(n,!1)}})]})}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"schemas (Separated by commas)"}),Object(f.jsx)($.a,{placeholder:"schema,schema",name:"schemas",value:r.join(","),onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s.split(","))}})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"parameters"}),Object(f.jsxs)(Z.a.Group,{widths:"equal",children:[Object(f.jsx)(Z.a.Input,{name:"parameterKey",value:b,placeholder:"key",onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}}),Object(f.jsx)(Z.a.Input,{name:"parameterValue",value:h,placeholder:"value",onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}}),Object(f.jsx)(g.a,{type:"submit",icon:"plus",onClick:this._addParameter.bind(this)})]}),Object(f.jsx)("div",{children:O})]}),Object(f.jsxs)(Z.a.Field,{children:[Object(f.jsx)("label",{children:"extensions"}),Object(f.jsxs)(Z.a.Group,{widths:"equal",children:[Object(f.jsx)(Z.a.Input,{name:"extensionKey",value:m,placeholder:"name",onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}}),Object(f.jsx)(Z.a.Input,{name:"extensionValue",value:p,placeholder:"schema",onChange:function(t,a){var n=a.name,s=a.value;e._inputHandle(n,s)}}),Object(f.jsx)(g.a,{type:"submit",icon:"plus",onClick:this._addExtension.bind(this)})]}),Object(f.jsx)("div",{children:v})]})]})}),Object(f.jsxs)(Te.a.Actions,{children:[Object(f.jsx)(g.a,{basic:!0,onClick:this.setOpen.bind(this,!1),children:"Cancel"}),Object(f.jsx)(g.a,{primary:!0,onClick:this._addNewClusterPgDatabase.bind(this),children:"Save"})]})]})}}]),a}(s.a.Component),ze=Object(l.f)(Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{addNewClusterPgDatabase:function(t,a){return e(U.addNewClusterPgDatabase(t,a))}}}))(Me)),We=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsxs)(s.a.Fragment,{children:[Object(f.jsxs)("div",{className:"inner-page",children:[Object(f.jsx)(v,{}),Object(f.jsx)("div",{id:"mainWrap",children:Object(f.jsxs)("div",{id:"mainContent",children:[Object(f.jsx)(l.a,{path:"/",exact:!0,component:Y}),Object(f.jsx)(l.a,{path:"/config",component:_e}),Object(f.jsx)(l.a,{path:"/playbook",component:ve}),Object(f.jsx)(l.a,{path:"/jobs",component:Re})]})}),Object(f.jsx)(x,{})]}),Object(f.jsx)(Le,{}),Object(f.jsx)(Pe,{}),Object(f.jsx)(Ie,{}),Object(f.jsx)(Je,{}),Object(f.jsx)(qe,{}),Object(f.jsx)(ze,{})]})}}]),a}(s.a.Component),Ke=a(185),Ye=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={visible:!!e.visible&&e.visible,loadingText:e.loadingText?e.loadingText:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showLoadingCover",(function(t){e.setState({visible:t,loadingText:"\u6570\u636e\u52a0\u8f7d\u4e2d..."})}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.visible,a=e.loadingText;return t?Object(f.jsx)("div",{id:"loadingCover",children:Object(f.jsxs)("div",{className:"loading-overlay",children:[Object(f.jsx)("div",{className:"loading loading-lg"}),Object(f.jsx)("div",{className:"font-bold",style:{marginLeft:"2rem"},children:a})]})}):null}}]),a}(s.a.Component),Qe=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"_getConfigData",value:function(){(0,this.props.getConfigData)({},(function(e){}))}},{key:"render",value:function(){var e=this.props,t=e.component,a=e.configData,n=Object(Ke.a)(e,["component","configData"]);return a.hasOwnProperty("all")?Object(f.jsx)(l.a,Object(_.a)(Object(_.a)({},n),{},{render:function(e){return Object(f.jsx)(t,Object(_.a)({},e))}})):(this._getConfigData(),Object(f.jsx)(Ye,{visible:!0,loadingText:"initializing..."}))}}]),a}(s.a.Component),Xe=Object(b.b)((function(e,t){return{configData:e.configData}}),(function(e){return{getConfigData:function(t,a){return e(U.getConfigData(t,a))}}}))(Qe);a(241);var Ze=function(){return Object(f.jsx)(i.a,{basename:"/",children:Object(f.jsx)(l.c,{children:Object(f.jsx)(Xe,{path:"/",component:We})})})},$e=function(e){e&&e instanceof Function&&a.e(124).then(a.bind(null,399)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))},et=a(74),tt=a(182),at={};var nt={};var st={list:[],logs:{}};var ct=Object(et.c)({account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at;return e},configData:function(){var e,t,a,n,s,c,r,i,l,o,u,d,j,b,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,m=arguments.length>1?arguments[1]:void 0;switch(m.type){case w.GET_CONFIG_DATA_SUCCESS:case w.SAVE_LOCAL_CONFIG_DATA_SUCCESS:return m.data;case w.ADD_NEW_CLUSTER_SUCCESS:return h.all.children[m.clusterName]={edit:!0,hosts:{},vars:{pg_cluster:m.clusterName,pg_users:[],pg_databases:[]}},JSON.parse(JSON.stringify(h));case w.REMOVE_CLUSTER_SUCCESS:return delete h.all.children[m.clusterName],JSON.parse(JSON.stringify(h));case w.ADD_NEW_CLUSTER_HOST_SUCCESS:return h.all.children[m.clusterName].edit=!0,h.all.children[m.clusterName].hosts[m.host_ip]={pg_offline_query:m.pg_offline_query,pg_role:m.pg_role,pg_seq:m.pg_seq},JSON.parse(JSON.stringify(h));case w.REMOVE_CLUSTER_HOST_SUCCESS:return h.all.children[m.clusterName].edit=!0,delete h.all.children[m.clusterName].hosts[m.hostName],JSON.parse(JSON.stringify(h));case w.ADD_NEW_CLUSTER_PG_USER_SUCCESS:if((null===(e=h.all.children[m.clusterName])||void 0===e?void 0:e.vars)||(h.all.children[m.clusterName].vars={}),(null===(t=h.all.children[m.clusterName])||void 0===t||null===(a=t.vars)||void 0===a?void 0:a.pg_users)||(h.all.children[m.clusterName].vars.pg_users=[]),null===(n=h.all.children[m.clusterName])||void 0===n||null===(s=n.vars)||void 0===s?void 0:s.pg_users){var p=m.formData;h.all.children[m.clusterName].vars.pg_users.push(p),h.all.children[m.clusterName].edit=!0}return JSON.parse(JSON.stringify(h));case w.REMOVE_CLUSTER_PG_USER_SUCCESS:if(null===(c=h.all.children[m.clusterName])||void 0===c||null===(r=c.vars)||void 0===r?void 0:r.pg_users){var f=h.all.children[m.clusterName].vars.pg_users.findIndex((function(e){return e.name===m.name}));h.all.children[m.clusterName].vars.pg_users.splice(f,1),h.all.children[m.clusterName].edit=!0}return JSON.parse(JSON.stringify(h));case w.ADD_NEW_CLUSTER_PG_DATABASE_SUCCESS:if((null===(i=h.all.children[m.clusterName])||void 0===i?void 0:i.vars)||(h.all.children[m.clusterName].vars={}),(null===(l=h.all.children[m.clusterName])||void 0===l||null===(o=l.vars)||void 0===o?void 0:o.pg_databases)||(h.all.children[m.clusterName].vars.pg_databases=[]),null===(u=h.all.children[m.clusterName])||void 0===u||null===(d=u.vars)||void 0===d?void 0:d.pg_databases){var O=m.formData;h.all.children[m.clusterName].vars.pg_databases.push(O),h.all.children[m.clusterName].edit=!0}return JSON.parse(JSON.stringify(h));case w.REMOVE_CLUSTER_PG_DATABASE_SUCCESS:if(null===(j=h.all.children[m.clusterName])||void 0===j||null===(b=j.vars)||void 0===b?void 0:b.pg_databases){var v=h.all.children[m.clusterName].vars.pg_databases.findIndex((function(e){return e.name===m.name}));h.all.children[m.clusterName].vars.pg_databases.splice(v,1),h.all.children[m.clusterName].edit=!0}return JSON.parse(JSON.stringify(h));case w.SAVE_LOCAL_CLUSTER_VARS_CONFIG_SUCCESS:return h.all.children[m.clusterName].vars=m.configData,JSON.parse(JSON.stringify(h));case w.SAVE_LOCAL_CLUSTER_CONFIG_SUCCESS:return h.all.children[m.clusterName]=m.configData,JSON.parse(JSON.stringify(h));default:return h}},jobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.GET_JOBS_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{list:t.data});case w.DELETE_JOB_SUCCESS:return e;case w.CREATE_JOB_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{list:[t.data].concat(Object(Be.a)(e.list))});case w.GET_JOB_LOGS_SUCCESS:return Object(_.a)(Object(_.a)({},e),{},{logs:Object(_.a)(Object(_.a)({},e.logs),{},Object(He.a)({},t.id,t.data))});default:return e}}}),rt=[function(e){return function(e){return function(t){return e(t)}}},tt.a],it=et.a.apply(void 0,rt)(et.d)(ct,{}),lt=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={toasts:[]},n}return Object(u.a)(a,[{key:"_delItem",value:function(){var e=this.state.toasts;e.shift(),this.setState({toasts:e})}},{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showToasts",(function(t){e.setState({toasts:[].concat(Object(Be.a)(e.state.toasts),[t])},(function(){setTimeout((function(){e._delItem()}),3e3)}))}))}},{key:"componentWillUnmount",value:function(){}},{key:"_renderToast",value:function(e,t){return Object(n.createElement)(V.a,Object(_.a)(Object(_.a)({className:"toast"},Object(He.a)({},e.type,e.type)),{},{key:t,header:e.msg}))}},{key:"render",value:function(){var e=this,t=this.state.toasts,a=[];return t.forEach((function(t,n){a.push(e._renderToast(t,n))})),Object(f.jsx)("div",{id:"toastsPanel",children:a})}}]),a}(s.a.Component),ot=a(386),ut=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={open:!1,content:"",confirmButton:"OK",cancelButton:"Cancel"},n.parentCallback=null,n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.emitter=S.addListener("showConfirmBox",(function(t){e.setState(Object(_.a)(Object(_.a)({},t),{},{open:!0})),e.parentCallback=t.callback}))}},{key:"handleConfirm",value:function(){var e=this;this.setState({content:"Are you sure?",confirmButton:"OK",cancelButton:"Cancel",open:!1},(function(){"function"===typeof e.parentCallback&&e.parentCallback(!0)}))}},{key:"handleCancel",value:function(){var e=this;this.setState({content:"Are you sure?",confirmButton:"OK",cancelButton:"Cancel",open:!1},(function(){"function"===typeof e.parentCallback&&e.parentCallback(!1)}))}},{key:"render",value:function(){var e=this.state,t=e.open,a=e.content,n=e.confirmButton,s=e.cancelButton;return Object(f.jsx)(ot.a,{size:"mini",open:t,content:a,confirmButton:n,cancelButton:s,onCancel:this.handleCancel.bind(this),onConfirm:this.handleConfirm.bind(this)})}}]),a}(s.a.Component);a(244);r.a.render(Object(f.jsx)(b.a,{store:it,children:Object(f.jsxs)(s.a.Fragment,{children:[Object(f.jsx)(Ye,{}),Object(f.jsx)(lt,{}),Object(f.jsx)(ut,{}),Object(f.jsx)(Ze,{})]})}),document.getElementById("root")),$e()},51:function(e,t,a){}},[[245,7,8]]]);
//# sourceMappingURL=main.513391a0.chunk.js.map